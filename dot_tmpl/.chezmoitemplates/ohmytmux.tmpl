{{- $tmuxConfigDir := joinPath .chezmoi.homeDir ".config/tmux" -}}
{{- $ohMyTmuxDir := joinPath .chezmoi.homeDir ".local/share/tmux/oh-my-tmux" -}}

# 1. ç¡®ä¿ç›®å½•å­˜åœ¨
mkdir -p {{ $tmuxConfigDir | quote }}
mkdir -p {{ dir $ohMyTmuxDir | quote }}

# 2. å…‹éš†æ¡†æ¶ï¼ˆå¦‚æœä¸å­˜åœ¨ï¼‰
if [ ! -d {{ $ohMyTmuxDir | quote }} ]; then
    echo "ğŸš€ æ­£åœ¨å…‹éš† oh-my-tmux æ¡†æ¶..."
    git clone --depth=1 https://github.com/gpakosz/.tmux.git {{ $ohMyTmuxDir | quote }}
fi

# 3. åˆ›å»ºå¼•å¯¼è½¯é“¾æ¥
# æ³¨æ„ï¼šTmux å¯åŠ¨åªè¯» ~/.config/tmux/tmux.conf
if [ ! -L {{ joinPath $tmuxConfigDir "tmux.conf" | quote }} ]; then
    echo "ğŸ”— åˆ›å»º tmux.conf è½¯é“¾æ¥..."
    ln -sf {{ joinPath $ohMyTmuxDir ".tmux.conf" | quote }} {{ joinPath $tmuxConfigDir "tmux.conf" | quote }}
fi