#!/bin/bash
# ç›‘æ§ Brewfile å˜åŒ– (SHA256): {{ include (joinPath .chezmoi.workingTree "homebrew/Brewfile") | sha256sum }}
set -eufo pipefail

{{ if .personal -}}
if command -v brew &> /dev/null; then
    echo "ğŸ [1/3] macOS (Personal): æ­£åœ¨åŒæ­¥ Homebrew çŠ¶æ€..."
    # --no-upgrade æé€Ÿï¼Œ--cleanup ä¿æŒçº¯å‡€
    brew bundle --no-upgrade --cleanup --file="{{ joinPath .chezmoi.workingTree "homebrew/Brewfile" }}"
else
    echo "âš ï¸  æœªå‘ç° Homebrewï¼Œè¯·æ‰‹åŠ¨å®‰è£…åå†è¯•ã€‚"
fi
{{- else -}}
echo "ğŸ’¡ éä¸ªäººè®¾å¤‡ï¼Œè·³è¿‡ Homebrew å…¨é‡åŒæ­¥ã€‚"
{{- end }}